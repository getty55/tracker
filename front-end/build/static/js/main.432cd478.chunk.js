(this.webpackJsonptracker=this.webpackJsonptracker||[]).push([[0],Array(21).concat([function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,c=n(1),s=n(6),i=n.n(s),r=(n(21),n(3)),u=Object(c.createContext)({userId:null,isLoggedIn:!1,token:null,login:function(){},logout:function(){}}),l=n(2),o=n(11),j=n(43),d=(n(22),n(0)),b=function(e){return i.a.createPortal(Object(d.jsx)(j.a,{in:e.show,timeout:300,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(d.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})}),document.getElementById("side-drawer"))},O=(n(26),function(e){return i.a.createPortal(Object(d.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop"))}),x=(n(27),function(){var e=Object(c.useContext)(u),t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1];return Object(d.jsxs)(c.Fragment,{children:[a&&Object(d.jsx)(O,{onClick:function(){return s(!1)}}),Object(d.jsx)(b,{show:a,onClick:function(){return s(!1)},children:Object(d.jsx)("div",{className:"navigation-drawer",children:e.isLoggedIn&&Object(d.jsx)(o.b,{to:"/authenticate",onClick:e.logout,children:"LOG OUT"})})}),Object(d.jsxs)("div",{className:"navigation",children:[e.isLoggedIn&&Object(d.jsx)("div",{className:"navigation-burger",children:Object(d.jsxs)("button",{onClick:function(){return s(!0)},children:[Object(d.jsx)("span",{}),Object(d.jsx)("span",{}),Object(d.jsx)("span",{})]})}),Object(d.jsx)("div",{className:"navigation-title",children:Object(d.jsx)("h2",{children:"EXPENSES TRACKER"})}),Object(d.jsx)("div",{className:"navigation-right",children:e.isLoggedIn&&Object(d.jsx)(o.b,{to:"/authenticate",onClick:e.logout,children:"LOG OUT"})})]})]})}),h=n(5),p=n.n(h),v=n(8),f=(n(29),function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),u=Object(r.a)(i,2),l=u[0],o=u[1];return Object(d.jsxs)("div",{className:!a&&l?"input-invalid":"input",children:[Object(d.jsx)("label",{children:e.id}),Object(d.jsx)("input",{id:e.id,type:e.type,step:e.step||"1",onChange:function(t){var n="date"===e.type?new Date(t.target.value):t.target.value;s(e.func(n)),e.change(n,e.func(n)),"number"===e.type&&o(!0)},onBlur:function(){return o(!0)}}),!a&&l&&Object(d.jsxs)("p",{children:["Enter a valid ",e.id]})]})}),m=(n(30),function(e){return Object(d.jsx)("button",{className:"button",type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),g=(n(31),function(){var e=Object(c.useContext)(u),t=Object(c.useState)(!0),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)({value:"",validity:!1}),l=Object(r.a)(i,2),o=l[0],j=l[1],b=Object(c.useState)({value:"",validity:!1}),O=Object(r.a)(b,2),x=O[0],h=O[1],g=Object(c.useState)({value:"",validity:!1}),k=Object(r.a)(g,2),y=k[0],N=k[1],S=Object(c.useState)({exists:!1,message:""}),w=Object(r.a)(S,2),C=w[0],I=w[1],D=Object(c.useState)({invalid:!1,message:""}),E=Object(r.a)(D,2),T=E[0],A=E[1],L=function(){var t=Object(v.a)(p.a.mark((function t(n){var c,s,i,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!a){t.next=19;break}return t.prev=2,t.next=5,fetch("https://expenses-tracker0.herokuapp.com/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x.value,password:y.value})});case 5:return c=t.sent,t.next=8,c.json();case 8:if(s=t.sent,401!==c.status&&403!==c.status){t.next=12;break}return A({invalid:!0,message:s.message}),t.abrupt("return");case 12:s.userId&&e.login(s.userId,s.token),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(2);case 17:t.next=34;break;case 19:return t.prev=19,t.next=22,fetch("https://expenses-tracker0.herokuapp.com/api/users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.value,email:x.value,password:y.value})});case 22:return i=t.sent,t.next=25,i.json();case 25:if(r=t.sent,404!==i.status){t.next=29;break}return I({exists:!0,message:r.message}),t.abrupt("return");case 29:r.userId&&e.login(r.userId,r.token),t.next=34;break;case 32:t.prev=32,t.t1=t.catch(19);case 34:case"end":return t.stop()}}),t,null,[[2,15],[19,32]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"auth",children:Object(d.jsxs)("div",{className:"auth-form",children:[Object(d.jsx)("div",{className:"auth-switch",children:Object(d.jsx)("h3",{children:a?"LOG IN":"SIGN UP"})}),Object(d.jsx)(m,{onClick:function(){return s((function(e){return!e}))},children:a?"SIGN UP":"LOG IN"}),Object(d.jsxs)("form",{children:[!a&&Object(d.jsx)("div",{children:Object(d.jsx)(f,{id:"name",type:"text",initialValue:"",func:function(e){return""!==e.trim()},change:function(e,t){return j({value:e,validity:t})}})}),Object(d.jsxs)("div",{children:[Object(d.jsx)(f,{id:"email",type:"email",initialValue:"",func:function(e){return e.includes("@")},change:function(e,t){h({value:e,validity:t}),T.invalid&&A({invalid:!1,message:""}),C.exists&&I({exists:!1,message:""})}}),C.exists&&Object(d.jsx)("h5",{children:C.message})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)(f,{id:"password",type:"password",initialValue:"",func:function(e){return e.length>5},change:function(e,t){N({value:e,validity:t}),T.invalid&&A({invalid:!1,message:""})}}),T.invalid&&Object(d.jsx)("h5",{children:T.message})]}),Object(d.jsx)(m,{onClick:L,disabled:a?!x.validity||!y.validity:!o.validity||!x.validity||!y.validity,children:"SUBMIT"})]})]})})}),k=["January","February","March","April","May","June","July","August","September","October","November","December"],y=(n(32),function(e){return Object(d.jsxs)("div",{className:"expense",children:[Object(d.jsxs)("div",{className:"expense-date",children:[Object(d.jsx)("div",{className:"expense-date__month",children:Object(d.jsx)("p",{children:k[e.date.getMonth()]})}),Object(d.jsx)("div",{className:"expense-date__day",children:Object(d.jsx)("p",{children:e.date.getDate()+1})}),Object(d.jsx)("div",{className:"expense-date__year",children:Object(d.jsx)("p",{children:e.date.getFullYear()})})]}),Object(d.jsx)("div",{className:"expense-amount",children:Object(d.jsxs)("h3",{children:["$",e.amount]})}),Object(d.jsx)("div",{className:"expense-name",children:Object(d.jsx)("h2",{children:e.name})}),Object(d.jsx)("button",{className:"expense-delete",onClick:function(){return e.onDelete(e.id)},children:"X"})]})}),N=(n(33),function(e){return Object(d.jsx)("div",{className:"expenses-list",children:e.expenses.map((function(t){return Object(d.jsx)(y,{id:t.id,name:t.name,amount:t.amount,date:new Date(t.date),onDelete:function(t){return e.onDelete(t)}},t.id)}))})}),S=(n(34),["2019","2020","2021","2022"]),w=function(e){return Object(d.jsx)("select",{className:"year-filter",value:e.currYear,onChange:function(t){return e.getYear(t.target.value)},children:S.map((function(e){return Object(d.jsx)("option",{children:e},e)}))})},C=n(15),I=n(12),D=(n(35),function(e){var t="0%";return e.max>0&&(t=Math.round(e.monthly/e.max*100)+"%"),Object(d.jsxs)("div",{className:"meter",children:[Object(d.jsx)("div",{className:"bar",children:Object(d.jsx)("div",{className:"percentage",style:{height:t}})}),Object(d.jsx)("label",{children:e.month.slice(0,3)+" "})]})}),E=(n(36),function(e){var t,n=new Array(12).fill(0),a=Object(I.a)(e.expenses);try{for(a.s();!(t=a.n()).done;){var c=t.value,s=new Date(c.date);n[s.getMonth()]+=c.amount}}catch(r){a.e(r)}finally{a.f()}var i=Math.max.apply(Math,Object(C.a)(n));return Object(d.jsx)("div",{className:"chart",children:k.map((function(e){return Object(d.jsx)(D,{month:e,monthly:n[k.indexOf(e)],max:i},e)}))})}),T=(n(37),function(e){var t=Object(c.useState)("2021"),n=Object(r.a)(t,2),a=n[0],s=n[1],i=e.expenses&&e.expenses.filter((function(e){return new Date(e.date).getFullYear()===+a}));return Object(d.jsxs)("div",{className:"expenses",children:[Object(d.jsx)(w,{currYear:a,getYear:function(e){return s(e)}}),i&&Object(d.jsx)(E,{expenses:i}),Object(d.jsx)(N,{expenses:i,onDelete:function(t){return e.onDelete(t)}})]})}),A=(n(38),function(e){var t=Object(c.useState)({value:"",validity:!1}),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)({value:0,validity:!1}),u=Object(r.a)(i,2),l=u[0],o=u[1],j=Object(c.useState)({value:"",validity:!1}),b=Object(r.a)(j,2),O=b[0],x=b[1],h=function(){var t=Object(v.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.onAdd(a.value,l.value,O.value),e.onCancel();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"new-expense",children:Object(d.jsxs)("form",{onSubmit:h,children:[Object(d.jsx)("div",{children:Object(d.jsx)(f,{id:"expense",type:"text",initialValue:"",func:function(e){return""!==e.trim()},change:function(e,t){return s({value:e,validity:t})}})}),Object(d.jsx)("div",{children:Object(d.jsx)(f,{id:"amount",type:"number",step:"0.01",initialValue:0,func:function(e){return e>0},change:function(e,t){return o({value:e,validity:t})}})}),Object(d.jsx)("div",{children:Object(d.jsx)(f,{id:"date",type:"date",initialValue:new Date,func:function(e){return e.getFullYear()<2023&&e.getFullYear()>2018},change:function(e,t){return x({value:e,validity:t})}})}),Object(d.jsxs)("div",{className:"new-expense-form__buttons",children:[Object(d.jsx)(m,{onClick:e.onCancel,children:"CANCEL"}),Object(d.jsx)(m,{type:"submit",disabled:!a.validity||!l.validity||!O.validity,children:"SUBMIT"})]})]})})}),L=(n(39),function(){var e=Object(c.useContext)(u),t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),o=Object(r.a)(i,2),j=o[0],b=o[1],O=Object(l.h)().uid,x=Object(c.useCallback)(Object(v.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://expenses-tracker0.herokuapp.com/api","/expenses/user/").concat(O));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,t.ok&&s(n.userExpenses),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])}))),[O]);Object(c.useEffect)((function(){x()}),[x]);var h=function(){var t=Object(v.a)(p.a.mark((function t(n,a,c){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://expenses-tracker0.herokuapp.com/api/expenses",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token},body:JSON.stringify({name:n,amount:a,date:c})});case 3:t.sent.ok&&x(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n,a){return t.apply(this,arguments)}}(),f=function(){var t=Object(v.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat("https://expenses-tracker0.herokuapp.com/api","/expenses/").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}});case 3:t.sent.ok&&x(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"tracker",children:[j&&Object(d.jsx)(A,{onAdd:h,onCancel:function(){return b(!1)}}),!j&&Object(d.jsx)(m,{onClick:function(){return b(!0)},children:"ADD EXPENSE"}),Object(d.jsx)(T,{expenses:a,onDelete:f})]})});n(40);var J=function(){var e,t=Object(c.useState)(null),n=Object(r.a)(t,2),s=n[0],i=n[1],j=Object(c.useState)(null),b=Object(r.a)(j,2),O=b[0],h=b[1],p=Object(c.useState)(),v=Object(r.a)(p,2),f=v[0],m=v[1],k=Object(c.useCallback)((function(e,t,n){i(e),h(t);var a=n||new Date((new Date).getTime()+36e5);m(a),localStorage.setItem("loginToken",JSON.stringify({userId:e,token:t,expiration:a.toISOString()}))}),[]),y=Object(c.useCallback)((function(){i(null),h(null),m(null),localStorage.removeItem("loginToken")}),[]);return Object(c.useEffect)((function(){if(O&&f){var e=f.getTime()-(new Date).getTime();a=setTimeout(y,e)}else clearTimeout(a)}),[O,y,f]),Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("loginToken"));e&&e.token&&new Date(e.expiration)>new Date&&k(e.userId,e.token,new Date(e.expiration))}),[k]),e=O?Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/:uid/tracker",element:Object(d.jsx)(L,{})}),Object(d.jsx)(l.b,{path:"*",element:Object(d.jsx)(l.a,{to:"/".concat(s,"/tracker")})})]}):Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/authenticate",element:Object(d.jsx)(g,{})}),Object(d.jsx)(l.b,{path:"*",element:Object(d.jsx)(l.a,{to:"/authenticate"})})]}),Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(u.Provider,{value:{userId:s,isLoggedIn:!!O,token:O,login:k,logout:y},children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(x,{}),Object(d.jsx)("main",{children:e})]})})})};i.a.render(Object(d.jsx)(J,{}),document.getElementById("root"))}]),[[41,1,2]]]);
//# sourceMappingURL=main.432cd478.chunk.js.map